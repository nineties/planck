=================
Bytecode Encoding
=================

File format
===========

+--------------+--------------------------------+
| field length | content                        |
+==============+================================+
| 4 bytes      | File magic "PLNK"              |
+--------------+--------------------------------+
| u32          | Data size (N)                  |
+--------------+--------------------------------+
| N bytes      | Sections                       |
+--------------+--------------------------------+

Section Format
==============

+--------------+--------------------------------+
| field length | content                        |
+==============+================================+
| 4 bytes      | Section type                   |
|              |                                |
|              | 4 ascii characters like "Code" |
+--------------+--------------------------------+
| u32          | Section size (N)               |
+--------------+--------------------------------+
| N bytes      | Section dependent data         |
+--------------+--------------------------------+
| (N - 3)/4*4  | Padding to fit 4-byte boundary |
| bytes        |                                |
+--------------+--------------------------------+

"Name" - Name Table
-------------------

Identifiers used for variables, constants, functions, types, etc.

+--------------+---------------------------------+
| field length | content                         |
+==============+=================================+
| u32          | Name count (N)                  |
+--------------+---------------------------------+
| ...          | Name 0 (null-terminated string) |
+--------------+---------------------------------+
| ...          | ...                             |
+--------------+---------------------------------+
| ...          | Name N-1                        |
+--------------+---------------------------------+

"ExpT" - Export Table
---------------------

Table of variables, constants, functions, types, etc. which are exported.

+--------------+--------------------------------+
| field length | content                        |
+==============+================================+
| u32          | Entry count (N)                |
+--------------+--------------------------------+
| ...          | N entries                      |
+--------------+--------------------------------+

Each entry has following format.

+--------------+--------------------------------+
| field length | content                        |
+==============+================================+
| u24          | Index of Name                  |
+--------------+--------------------------------+
| u8           | Entry type                     |
|              |                                |
|              | * 'V': variable                |
|              | * 'C': constant                |
|              | * 'F': function                |
|              | * 'T': type                    |
+--------------+--------------------------------+
| u32          | Index of definition            |
+--------------+--------------------------------+
